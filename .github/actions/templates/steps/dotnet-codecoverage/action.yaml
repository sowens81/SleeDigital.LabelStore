name: dotnet-codecoverage
description: Publish .Net Solutuon Code Coverage

inputs: 
    dotnetProjectName:
        description: Name of the .Net Projects where Coverage test will be run.
        required: true
    
runs:
    using: "composite"
    steps:  
    - name: Generate coverage report
      run: |
        cd ./${{ dotnetProjectName }}.Tests/
        dotnet test /p:CollectCoverage=true /p:CoverletOutput=TestResults/ /p:CoverletOutputFormat=lcov
    - name: Publish coverage report to coveralls.io
      uses: coverallsapp/github-action@master
      with:
        github-token: ${{ secrets.GITHUB_TOKEN }}
        path-to-lcov: ./${{ dotnetProjectName }}.Tests/TestResults/coverage.info